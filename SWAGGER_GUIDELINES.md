# Swagger λ¬Έμ„ν™” μ§€μΉ¨

## π“‹ κ°μ”

μ΄ λ¬Έμ„λ” API κΈ°λ¥ λ³€κ²½ μ‹ Swagger λ¬Έμ„λ¥Ό μ¬λ°”λ¥΄κ² μ—…λ°μ΄νΈν•κΈ° μ„ν• μ§€μΉ¨μ…λ‹λ‹¤.

## π”„ κΈ°λ¥ λ³€κ²½ μ‹ μ²΄ν¬λ¦¬μ¤νΈ

### 1. μΈμ¦ κ΄€λ ¨ λ³€κ²½

- [ ] **μƒλ΅μ΄ μΈμ¦ μ—”λ“ν¬μΈνΈ μ¶”κ°€ μ‹**

  - `src/routes/auth.ts`μ— `@openapi` μ£Όμ„ μ¶”κ°€
  - `security: [bearerAuth: []]` μ¶”κ°€ (μΈμ¦μ΄ ν•„μ”ν• κ²½μ°)
  - `tags: [1οΈβƒ£ μΈμ¦]` μ‚¬μ©

- [ ] **κΈ°μ΅΄ μΈμ¦ λ΅μ§ λ³€κ²½ μ‹**
  - μ”μ²­/μ‘λ‹µ μ¤ν‚¤λ§ μ—…λ°μ΄νΈ
  - μ„¤λ…(description) μ—…λ°μ΄νΈ
  - μμ‹(example) μ—…λ°μ΄νΈ

### 2. API μ—”λ“ν¬μΈνΈ λ³€κ²½

- [ ] **μƒλ΅μ΄ μ—”λ“ν¬μΈνΈ μ¶”κ°€ μ‹**

  - ν•΄λ‹Ή λΌμ°ν„° νμΌμ— `@openapi` μ£Όμ„ μ¶”κ°€
  - μ μ ν• νƒκ·Έ μ„ νƒ:
    - `1οΈβƒ£ μΈμ¦`: λ΅κ·ΈμΈ, νμ›κ°€μ…
    - `1οΈβƒ£ μ§€κ°‘`: μ§€κ°‘ κ΄€λ ¨ κΈ°λ¥
    - `2οΈβƒ£ μΏ ν°`: cryptoObject κ΄€λ ¨ κΈ°λ¥
    - `ν¬μΈνΈ`: ν¬μΈνΈ μ‹μ¤ν…
    - `Move`: Sui Move μ»¨νΈλ™νΈ νΈμ¶
    - `λ°μ΄ν„°λ² μ΄μ¤`: DB μƒνƒ ν™•μΈ

- [ ] **κΈ°μ΅΄ μ—”λ“ν¬μΈνΈ μμ • μ‹**
  - μ”μ²­/μ‘λ‹µ μ¤ν‚¤λ§ μ—…λ°μ΄νΈ
  - νλΌλ―Έν„° λ³€κ²½μ‚¬ν•­ λ°μ
  - μ—λ¬ μ‘λ‹µ μ½”λ“ μ¶”κ°€/μμ •

### 3. μΈμ¦ λ°©μ‹ λ³€κ²½

- [ ] **ν† ν° κΈ°λ° μΈμ¦μΌλ΅ λ³€κ²½ μ‹**

  - `security: [bearerAuth: []]` μ¶”κ°€
  - `x-user-address` ν—¤λ” μ κ±°
  - μ”μ²­ μ¤ν‚¤λ§μ—μ„ λ¶ν•„μ”ν• ν•„λ“ μ κ±°

- [ ] **κ³µκ° APIλ΅ λ³€κ²½ μ‹**
  - `security` μ„Ήμ… μ κ±°
  - μΈμ¦ κ΄€λ ¨ μ„¤λ… μ κ±°

### 4. λ°μ΄ν„° λ¨λΈ λ³€κ²½

- [ ] **μ—”ν‹°ν‹° μ¤ν‚¤λ§ λ³€κ²½ μ‹**
  - ν•΄λ‹Ή μ—”ν‹°ν‹°λ¥Ό μ‚¬μ©ν•λ” λ¨λ“  APIμ μ¤ν‚¤λ§ μ—…λ°μ΄νΈ
  - ν•„λ“ μ¶”κ°€/μ κ±°/νƒ€μ… λ³€κ²½ λ°μ
  - μμ‹ λ°μ΄ν„° μ—…λ°μ΄νΈ

## π“ Swagger μ£Όμ„ μ‘μ„± κ·μΉ™

### κΈ°λ³Έ κµ¬μ΅°

```typescript
/**
 * @openapi
 * /api/path:
 *   method:
 *     tags:
 *       - νƒκ·Έλ…
 *     summary: κ°„λ‹¨ν• μ„¤λ…
 *     description: μμ„Έν• μ„¤λ…
 *     security:
 *       - bearerAuth: []  // μΈμ¦μ΄ ν•„μ”ν• κ²½μ°
 *     parameters:  // URL νλΌλ―Έν„°κ°€ μλ” κ²½μ°
 *       - in: path
 *         name: paramName
 *         schema:
 *           type: string
 *         required: true
 *         description: νλΌλ―Έν„° μ„¤λ…
 *     requestBody:  // POST/PUT μ”μ²­μΈ κ²½μ°
 *       required: true
 *       content:
 *         application/json:
 *           schema:
 *             type: object
 *             required:
 *               - field1
 *             properties:
 *               field1:
 *                 type: string
 *                 description: ν•„λ“ μ„¤λ…
 *                 example: "μμ‹κ°’"
 *     responses:
 *       200:
 *         description: μ„±κ³µ μ‘λ‹µ
 *         content:
 *           application/json:
 *             schema:
 *               type: object
 *               properties:
 *                 success:
 *                   type: boolean
 *                 data:
 *                   type: object
 *       400:
 *         description: μλ»λ μ”μ²­
 *       401:
 *         description: μΈμ¦ ν•„μ”
 *       500:
 *         description: μ„λ²„ μ¤λ¥
 */
```

### νƒκ·Έ μ‚¬μ© κ·μΉ™

- `1οΈβƒ£ μΈμ¦`: μ‚¬μ©μ μΈμ¦, λ΅κ·ΈμΈ, νμ›κ°€μ…
- `1οΈβƒ£ μ§€κ°‘`: Sui μ§€κ°‘ κ΄€λ¦¬, μ”μ•΅ μ΅°ν, μ „μ†΅
- `2οΈβƒ£ μΏ ν°`: cryptoObject μƒμ„±, κ±°λ, λ””μ½”λ”©
- `ν¬μΈνΈ`: ν¬μΈνΈ μ¶©μ „, μ΅°ν, μ‚¬μ©
- `Move`: Sui Move μ¤λ§νΈ μ»¨νΈλ™νΈ νΈμ¶
- `λ°μ΄ν„°λ² μ΄μ¤`: DB μƒνƒ ν™•μΈ, λ§μ΄κ·Έλ μ΄μ…

### λ³΄μ• μ„¤μ •

- **μΈμ¦ ν•„μ”**: `security: [bearerAuth: []]`
- **κ³µκ° API**: `security` μ„Ήμ… μ—†μ
- **κ΄€λ¦¬μ μ „μ©**: `security: [bearerAuth: []]` + μ½”λ“μ—μ„ `requireAdmin` μ‚¬μ©

## π” λ³€κ²½μ‚¬ν•­ κ²€μ¦

### 1. λ΅μ»¬ ν…μ¤νΈ

```bash
# μ„λ²„ μ‹¤ν–‰
npm run dev

# Swagger UI ν™•μΈ
# http://localhost:3000/api-docs

# Swagger μ¤ν™ κ²€μ¦
npm run swagger:check
```

### 2. μ²΄ν¬ν¬μΈνΈ

- [ ] λ¨λ“  μ—”λ“ν¬μΈνΈκ°€ Swaggerμ— ν‘μ‹λλ”κ°€?
- [ ] μ”μ²­/μ‘λ‹µ μ¤ν‚¤λ§κ°€ μ‹¤μ  μ½”λ“μ™€ μΌμΉν•λ”κ°€?
- [ ] μΈμ¦ μ„¤μ •μ΄ μ¬λ°”λ¥Έκ°€?
- [ ] μμ‹ λ°μ΄ν„°κ°€ μ ν¨ν•κ°€?
- [ ] μ—λ¬ μ‘λ‹µμ΄ λ¨λ‘ μ •μλμ–΄ μλ”κ°€?

## π¨ μ£Όμμ‚¬ν•­

### 1. μΌκ΄€μ„± μ μ§€

- κ°™μ€ κΈ°λ¥μ APIλ“¤μ€ λ™μΌν• νƒκ·Έ μ‚¬μ©
- λΉ„μ·ν• μ¤ν‚¤λ§λ” μ¬μ‚¬μ© κ°€λ¥ν•λ„λ΅ μ„¤κ³„
- λ„¤μ΄λ° μ»¨λ²¤μ… ν†µμΌ

### 2. μ‹¤μ‹κ°„ μ—…λ°μ΄νΈ

- μ½”λ“ λ³€κ²½κ³Ό λ™μ‹μ— Swagger μ£Όμ„λ„ μ—…λ°μ΄νΈ
- λ‚μ¤‘μ— μ—…λ°μ΄νΈν•λ©΄ λ„λ½ κ°€λ¥μ„± λ†’μ
- PR λ¦¬λ·° μ‹ Swagger λ³€κ²½μ‚¬ν•­λ„ ν•¨κ» κ²€ν† 

### 3. λ²„μ „ κ΄€λ¦¬

- API λ²„μ „ λ³€κ²½ μ‹ Swagger λ²„μ „λ„ ν•¨κ» μ—…λ°μ΄νΈ
- ν•μ„ νΈν™μ„± κ³ λ ¤
- Deprecated API ν‘μ‹

## π“ μ°Έκ³  μλ£

### Swagger/OpenAPI 3.0 μ¤ν™

- [OpenAPI Specification](https://swagger.io/specification/)
- [Swagger Editor](https://editor.swagger.io/)

### ν„μ¬ ν”„λ΅μ νΈ μ„¤μ •

- Swagger μ„¤μ •: `src/index.ts`
- λ³΄μ• μ¤ν‚¤λ§: `bearerAuth`
- μ„λ²„ URL: `http://localhost:3000`

## π”§ μλ™ν™” λ„κµ¬

### Swagger κ²€μ¦

```bash
# Swagger μ¤ν™ κ²€μ¦ (λΉλ“ ν›„)
npm run swagger:check

# λλ” κ°λ³„ μ‹¤ν–‰
npm run build
npm run swagger:validate

# OpenAPI μ¤ν™ κ²€μ¦ (μ„ νƒμ‚¬ν•­)
npx @apidevtools/swagger-parser validate dist/swagger.json
```

### μ½”λ“ μƒμ„±

```bash
# TypeScript νƒ€μ… μƒμ„± (μ„ νƒμ‚¬ν•­)
npx openapi-typescript http://localhost:3000/api-docs -o src/types/api.ts
```

---

**π’΅ ν**: κΈ°λ¥ λ³€κ²½ μ‹ μ΄ μ²΄ν¬λ¦¬μ¤νΈλ¥Ό λ”°λΌκ°€λ©΄ Swagger λ¬Έμ„λ¥Ό λΉ λ¨λ¦¬μ§€ μ•κ³  μ—…λ°μ΄νΈν•  μ μμµλ‹λ‹¤!
